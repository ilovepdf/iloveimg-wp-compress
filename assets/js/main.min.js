!function(){var o,e="",l=(void 0!==window.adminpage&&(e=window.adminpage),new Array);function t(e){var t=jQuery(e.target),o=t.closest("td");t.attr("disabled","disabled"),t.next().show(),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_compress_library",id:t.data("id")||t.attr("data-id"),imgnonce:t.data("imgnonce")||t.attr("data-imgnonce")},success:function(e){t.removeAttr("disabled"),o.html(e)},error:function(){t.removeAttr("disabled")}})}var i;switch(e){case"upload-php":jQuery(document).on("click","button.iloveimg-compress",t);break;case"media_page_iloveimg-media-page":case"post-php":jQuery(document).on("click","button.iloveimg-compress",t),jQuery(document).on("click","button#iloveimg_allcompress",function(e){i=jQuery("button.iloveimg-compress").length,jQuery("button#iloveimg_allcompress").attr("disabled","disabled"),jQuery("button.iloveimg-compress").each(function(e,t){jQuery(t).trigger("click"),o=setInterval(function(){var e=100-100*jQuery("button.iloveimg-compress").length/i;jQuery("button#iloveimg_allcompress .iloveimg-compress-all__percent").width(e+"%"),jQuery("button.iloveimg-compress").length||clearInterval(o)},300),location.reload()})}),jQuery("<option>").val("iloveimg_bulk_action").text("Compress Images").appendTo("select[name=action]"),jQuery("<option>").val("iloveimg_bulk_action").text("Compress Images").appendTo("select[name=action2]"),jQuery(".iloveimg_compressing").each(function(i,n){l["ref_"+i]=setInterval(function(){var e,t,o;e=n,t=i,o=(e=jQuery(e)).closest("td"),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_compress_library_is_compressed",id:e.data("id")||e.attr("data-id"),imgnonce:e.data("imgnonce")||e.attr("data-imgnonce")},success:function(e){clearInterval(l["ref_"+t]),o.html(e)},error:function(){}})},1e3)}),jQuery(document).on("submit","form#images-filter, form#posts-filter",function(e){"iloveimg_bulk_action"==jQuery(document).find("select#bulk-action-selector-top option:checked").val()&&(e.preventDefault(),jQuery("table.wp-list-table.images tbody tr, table.wp-list-table.media tbody tr").each(function(e,t){jQuery(t).find("th.check-column input[type='checkbox']").is(":checked")&&jQuery(t).find("td.status button, td.iloveimg_compression button").trigger("click")}))})}jQuery(".iloveimg_settings__options-container form input").on("change",function(e){jQuery(".iloveimg_settings__options-container form .submit button").hasClass("need_saving")||setTimeout(function(){jQuery(".iloveimg_settings__options-container form .submit button").addClass("need_saving"),setTimeout(function(){jQuery(".iloveimg_settings__options-container form .submit button").removeClass("need_saving")},5e3)},1e3)}),jQuery(".iloveimg_page_iloveimg-compress-admin-page #iloveimg_restore_all").on("click",function(e){e.preventDefault();var t=jQuery(e.currentTarget),o=(t.parent().append('\n                    <dialog id="iloveimg-compress-restore-dialog" class="iloveimg-restore-dialog">\n                        <h2 class="iloveimg-title-dialog">Attention!</h2>\n                        <p class="iloveimg-content-dialog">The changes applied by all the tools will be lost. Do you want to continue?</p>\n                        <div class="iloveimg-btn-groups">\n                            <button id="iloveimg-compress-dialog-aceptted" class="button button-primary">Yes</button>\n                            <button id="iloveimg-compress-dialog-close" class="button button-secondary">Close</button>\n                        </div>\n                    </dialog>'),document.getElementById("iloveimg-compress-restore-dialog")),e=document.getElementById("iloveimg-compress-dialog-aceptted"),i=document.getElementById("iloveimg-compress-dialog-close");o.showModal(),e.addEventListener("click",function(e){e.preventDefault(),t.attr("disabled","disabled"),o.close(),o.remove(),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_compress_restore_all"},success:function(){t.removeAttr("disabled"),location.reload()},error:function(){t.removeAttr("disabled")}})}),i.addEventListener("click",function(e){e.preventDefault(),o.close(),o.remove()})}),jQuery(".iloveimg_page_iloveimg-compress-admin-page #iloveimg_clear_backup").on("click",function(e){e.preventDefault();var t=jQuery(e.currentTarget),o=(t.parent().append('\n                    <dialog id="iloveimg-compress-restore-dialog" class="iloveimg-restore-dialog">\n                        <h2 class="iloveimg-title-dialog">Attention!</h2>\n                        <p class="iloveimg-content-dialog">All files inside iloveimg-backup folder will be deleted. Do you want to continue?</p>\n                        <div class="iloveimg-btn-groups">\n                            <button id="iloveimg-compress-dialog-aceptted" class="button button-primary">Yes</button>\n                            <button id="iloveimg-compress-dialog-close" class="button button-secondary">Close</button>\n                        </div>\n                    </dialog>'),document.getElementById("iloveimg-compress-restore-dialog")),e=document.getElementById("iloveimg-compress-dialog-aceptted"),i=document.getElementById("iloveimg-compress-dialog-close");o.showModal(),e.addEventListener("click",function(e){e.preventDefault(),t.attr("disabled","disabled"),o.close(),o.remove(),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"ilove_img_compress_clear_backup"},success:function(){t.removeAttr("disabled"),location.reload()},error:function(){t.removeAttr("disabled")}})}),i.addEventListener("click",function(e){e.preventDefault(),o.close(),o.remove()})}),jQuery(".iloveimg-compress.iloveimg_restore_button_wrapper .iloveimg_restore_button").on("click",function(e){e.preventDefault();var t=jQuery(e.currentTarget),o=(o=jQuery(e.currentTarget).siblings("#_wpnonce")).val(),i=t.data("action"),n=t.data("id"),l=(t.hide(),t.nextAll(".loading").show(),t.parent().append('\n                    <dialog id="iloveimg-compress-restore-dialog" class="iloveimg-restore-dialog">\n                        <h2 class="iloveimg-title-dialog">Attention!</h2>\n                        <p class="iloveimg-content-dialog">The changes applied by all the tools will be lost. Do you want to continue?</p>\n                        <div class="iloveimg-btn-groups">\n                            <button id="iloveimg-compress-dialog-aceptted" class="button button-primary">Yes</button>\n                            <button id="iloveimg-compress-dialog-close" class="button button-secondary">Close</button>\n                        </div>\n                    </dialog>'),document.getElementById("iloveimg-compress-restore-dialog")),e=document.getElementById("iloveimg-compress-dialog-aceptted"),a=document.getElementById("iloveimg-compress-dialog-close");l.showModal(),e.addEventListener("click",function(e){e.preventDefault(),t.attr("disabled","disabled"),l.close(),l.remove(),jQuery.ajax({url:ajaxurl,type:"POST",data:{action:i,id:n,_wpnonce:o},dataType:"json",success:function(e){t.nextAll(".loading").hide(),t.nextAll(".success").html(e.data).show(),location.reload()},error:function(e){t.nextAll(".loading").hide(),t.nextAll(".error").html(e.responseJSON.data).show(),t.show()}})}),a.addEventListener("click",function(e){e.preventDefault(),t.show(),t.nextAll(".loading").hide(),l.close(),l.remove()})})}.call();